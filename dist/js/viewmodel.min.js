var viewModel=function(){var a=this,b=document.getElementById("input"),c=document.getElementsByTagName("paper-drawer-panel")[0];a.workList=ko.observableArray([]),a.addMarker=function(b){var c=new google.maps.Marker({position:{lat:b.latitude,lng:b.longitude},title:b.name,map:map,icon:b.markerIcon});return c.addListener("click",function(){a.toggleClicked(b)}),c},a.startBounce=function(a){a.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){a.setAnimation(null)},1400)},a.toggleClicked=function(b){a.workList().forEach(function(a){null!==a.infoWindow&&a.infoWindow.close(),a.isClicked(!1)}),b.isClicked(!0),c.closeDrawer(),b.infoWindow=new google.maps.InfoWindow({content:b.wikiInfo}),b.infoWindow.open(map,b.marker),a.startBounce(b.marker)},initialWorks.forEach(function(b){a.workList.push(new Work(b))});var d=new google.maps.LatLngBounds;a.workList().forEach(function(a){var b=new google.maps.LatLng(a.latitude,a.longitude);d.extend(b)}),map.fitBounds(d);var e="https://en.wikipedia.org/w/api.php?format=json&formatversion=2&action=query&prop=extracts&exintro=&explaintext=&exchars=300&pageids=",f="https://maps.googleapis.com/maps/api/streetview?size=200x200&key=AIzaSyC6ulNy4A2PyqHTu0sjc6l4t_XOMg_tRAU&location=";a.workList().forEach(function(b){b.marker=a.addMarker(b);var c=setTimeout(function(){b.wikiInfo="Unfortunately, we hit a snag retrieving Wikipedia information!"},8e3);$.ajax({url:e+b.wikiPageId,dataType:"jsonp"}).done(function(a){var d=a.query.pages[0].extract;b.wikiInfo='<div class="info-window"><p class="info-window-wiki">',d?b.wikiInfo=b.wikiInfo+d:b.wikiInfo=b.wikiInfo+b.name+" unfortunately has no entry on Wikipedia.",b.wikiInfo=b.wikiInfo+'</p><img class="info-window-image" alt="Street View Image" src="'+f+b.latitude+","+b.longitude+"&heading="+b.heading+'"></div>',clearTimeout(c)})}),b.oninput=function(){a.workList().forEach(function(a){-1!==a.name.toUpperCase().search(b.value.toUpperCase())?a.isInList(!0):a.isInList(!1)}),a.workList().forEach(function(a){a.isInList()?a.marker.setVisible(!0):a.marker.setVisible(!1)})}};